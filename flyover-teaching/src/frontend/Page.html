<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Custom Styles -->
    <?!= include('frontend/Style.css') ?>
    <?!= include('frontend/EnhancedStyles.css') ?>
  </head>
  <body>
    <div id="app">
      <loading-spinner v-if="loading"></loading-spinner>
      
      <div v-else class="container-fluid p-3 fade-in-up">
        <!-- Year Selector -->
        <year-selector @year-changed="onYearChanged"></year-selector>
        
        <!-- Header -->
        <div class="header mb-4 slide-in-right">
          <h4 class="text-primary">
            <i class="fas fa-graduation-cap me-2"></i>
            {{ config.title }}
          </h4>
          <p class="text-muted mb-0">{{ config.subtitle }}</p>
        </div>
        
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3">
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'schedule' }" 
               @click="activeTab = 'schedule'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="Manage class schedules and daily activities">
              <i class="fas fa-calendar-alt"></i> Schedule
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'students' }" 
               @click="activeTab = 'students'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="Student roster and information management">
              <i class="fas fa-users"></i> Students
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'analytics' }" 
               @click="activeTab = 'analytics'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="Visual charts and data analysis">
              <i class="fas fa-chart-bar"></i> Analytics
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'behavior' }" 
               @click="activeTab = 'behavior'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="Daily behavior tracking with 1-3 scale">
              <i class="fas fa-user-check"></i> Behavior
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'datacollection' }" 
               @click="activeTab = 'datacollection'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="IEP data collection tools for special education">
              <i class="fas fa-clipboard-check"></i> Data Collection
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'export' }" 
               @click="activeTab = 'export'" href="#"
               data-bs-toggle="tooltip" data-bs-placement="bottom"
               title="Export data as PDF, JSON, or to Google Drive">
              <i class="fas fa-file-export"></i> Export
            </a>
          </li>
        </ul>
        
        <!-- Tab Content -->
        <div class="tab-content">
          <!-- Schedule Tab -->
          <schedule-view v-if="activeTab === 'schedule'" 
                        :schedule="schedule"
                        @refresh="loadSchedule">
          </schedule-view>
          
          <!-- Students Tab -->
          <students-view v-if="activeTab === 'students'" 
                        :students="students"
                        @refresh="loadStudents">
          </students-view>
          
          <!-- Analytics Tab -->
          <analytics-view v-if="activeTab === 'analytics'"
                         :schedule="schedule"
                         :students="students">
          </analytics-view>
          
          <!-- Behavior Tab -->
          <behavior-view v-if="activeTab === 'behavior'"
                        :students="students"
                        @refresh="loadStudents">
          </behavior-view>
          
          <!-- Data Collection Tab -->
          <data-collection-view v-if="activeTab === 'datacollection'"
                               :students="students"
                               @refresh="loadStudents">
          </data-collection-view>
          
          <!-- Export Tab -->
          <export-view v-if="activeTab === 'export'"
                      :schedule="schedule"
                      :students="students">
          </export-view>
        </div>
      </div>
      
      <!-- Toast Notifications -->
      <toast-notification ref="toast"></toast-notification>
      
      <!-- Floating Action Button -->
      <button class="fab" @click="toggleQuickActions" v-if="!loading">
        <i class="fas fa-plus" :class="{ 'fa-times': showQuickActions }"></i>
      </button>
      
      <!-- Quick Actions Menu -->
      <div class="quick-actions" :class="{ show: showQuickActions }">
        <button class="quick-action-btn" @click="quickAddStudent" 
                data-bs-toggle="tooltip" data-bs-placement="left" title="Add Student">
          <i class="fas fa-user-plus text-primary"></i>
        </button>
        <button class="quick-action-btn" @click="quickAddSchedule" 
                data-bs-toggle="tooltip" data-bs-placement="left" title="Add Schedule Entry">
          <i class="fas fa-calendar-plus text-success"></i>
        </button>
        <button class="quick-action-btn" @click="quickExportPDF" 
                data-bs-toggle="tooltip" data-bs-placement="left" title="Export PDF">
          <i class="fas fa-file-pdf text-danger"></i>
        </button>
        <button class="quick-action-btn" @click="showHelp" 
                data-bs-toggle="tooltip" data-bs-placement="left" title="Help">
          <i class="fas fa-question-circle text-info"></i>
        </button>
      </div>
    </div>
    
    <!-- Include Vue Components -->
    <?!= include('frontend/Components') ?>
    <?!= include('frontend/BehaviorComponent') ?>
    <?!= include('frontend/DataCollectionComponent') ?>
    <?!= include('frontend/YearSelector') ?>
    <?!= include('frontend/App') ?>
  </body>
</html>